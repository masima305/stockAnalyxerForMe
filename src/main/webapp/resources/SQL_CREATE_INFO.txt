테이블 생성 명세

1. <TB_STOKA_STOK_LIST> 주식 기본정보 테이블(DB 반영)
CREATE TABLE IF NOT EXISTS `TB_STOKA_STOK_LIST` (

  `STOK_ID` 		VARCHAR(10) NOT NULL COMMENT '주식 고유번호',
  `STOK_NM` 		VARCHAR(60) 	NULL COMMENT '주식 이름',
  `STOK_REGD_DT` 	DATETIME 		NULL COMMENT '주식 입력일자',
  `STOK_UPDT` 		DATETIME 		NULL COMMENT '주식정보 업데이트 일자',
  PRIMARY KEY (`STOK_ID`))
ENGINE = InnoDB;

2. 당기순이익 연도별 테이블


CREATE TABLE IF NOT EXISTS `TB_STOKA_YEAR_NETPROF` (
  `STOK_ID` VARCHAR(10) NOT NULL COMMENT '주식 고유번호',
  `STOK_SEQ` VARCHAR(1000) NOT NULL COMMENT '주식정보 수집 차수',
  `LABEL_YM5` VARCHAR(40) NULL DEFAULT 'UNKNOWN' COMMENT '5년 전 연도',
  `NETP_YM5` VARCHAR(40) NULL DEFAULT 'UNKNOWN' COMMENT '5년 전 당기순이익 실적',
  `LABEL_YM4` VARCHAR(40) NULL DEFAULT 'UNKNOWN' COMMENT '4년전 연도',
  `NETP_YM4` VARCHAR(40) NULL DEFAULT 'UNKNOWN' COMMENT '4년전 당기순이익 실적',
  `LABEL_YM3` VARCHAR(40) NULL DEFAULT 'UNKNOWN' COMMENT '3년전 연도',
  `NETP_YM3` VARCHAR(40) NULL DEFAULT 'UNKNOWN' COMMENT '3년전 당기순이익 실적',
  `LABEL_YM2` VARCHAR(40) NULL DEFAULT 'UNKNOWN' COMMENT '2년전 연도',
  `NETP_YM2` VARCHAR(40) NULL DEFAULT 'UNKNOWN' COMMENT '2년전 당기순이익 실적',
  `LABEL_YM1` VARCHAR(40) NULL DEFAULT 'UNKNOWN' COMMENT '1년전 연도',
  `NETP_YM1` VARCHAR(40) NULL DEFAULT 'UNKNOWN' COMMENT '1년전 당기순이익 실적',
  `LABEL_YM0` VARCHAR(45) NULL COMMENT '당해 연도',
  `NETP_YM0` VARCHAR(45) NULL COMMENT '당해 당기 순이익',
  `INP_DT` DATETIME NULL COMMENT '입력일시',
  INDEX `fk_TB_STOKA_NET_PROF_TB_STOKA_STOK_LIST_idx` (`STOK_ID` ASC, `STOK_SEQ` ASC) VISIBLE,
  PRIMARY KEY (`STOK_ID`, `STOK_SEQ`),
  CONSTRAINT `fk_TB_STOKA_NET_PROF_TB_STOKA_STOK_LIST`
    FOREIGN KEY (`STOK_ID`)
    REFERENCES `TB_STOKA_STOK_LIST` (`STOK_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB


---- 인서트

TB_STOKA_YEAR_NETPROF
TB_STOKA_YEAR_NETPROF
INSERT INTO TB_STOKA_YEAR_NETPROF
	(	  STOK_ID
		, STOK_SEQ
		, LABEL_YM5
		, NETP_YM5
		, LABEL_YM4
		, NETP_YM4
		, LABEL_YM3
		, NETP_YM3
		, LABEL_YM2
		, NETP_YM2
		, LABEL_YM1
		, NETP_YM1
		, LABEL_YM0
		, NETP_YM0
		, INP_DT
	)
VALUES
	(	  NULL
		, NULL
		, NULL
		, NULL
		, NULL
		, NULL
		, NULL
		, NULL
		, NULL
		, NULL
		, NULL
		, NULL
		, NULL
		, NULL
		, NULL);

3. 1단계 결과 테이블

CREATE TABLE IF NOT EXISTS `mydb`.`TB_STOKA_RD01` (
  `STOK_ID` VARCHAR(10) NOT NULL,
  `STOK_SEQ` VARCHAR(1000) NOT NULL,
  `RESULT_YM4` VARCHAR(4) NULL,
  `RESULT_YM3` VARCHAR(4) NULL,
  `RESULT_YM2` VARCHAR(4) NULL,
  `RESULT_YM1` VARCHAR(4) NULL,
  `RESULT_QM5` VARCHAR(4) NULL,
  `RESULT_QM4` VARCHAR(4) NULL,
  `RESULT_QM3` VARCHAR(4) NULL,
  `RESULT_QM2` VARCHAR(4) NULL,
  `RESULT_QM1` VARCHAR(4) NULL,
  `RESULT_QM0` VARCHAR(4) NULL,
  `RESULT_TOT_Y` VARCHAR(10) NULL,
  `RESULT_TOT_Q` VARCHAR(10) NULL,
  `RESULT_RD01` VARCHAR(10) NULL,
  INDEX `fk_TB_STOKA_RD01_TB_STOKA_NET_PROF1_idx` (`STOK_SEQ` ASC, `STOK_ID` ASC) VISIBLE,
  PRIMARY KEY (`STOK_ID`, `STOK_SEQ`),
  CONSTRAINT `fk_TB_STOKA_RD01_TB_STOKA_NET_PROF1`
    FOREIGN KEY (`STOK_SEQ` , `STOK_ID`)
    REFERENCES `mydb`.`TB_STOKA_NET_PROF` (`STOK_SEQ` , `STOK_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB